<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Multi-Step Form</title>
    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="//unpkg.com/alpinejs" defer></script>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <main>
        <div x-data="{ activeTab: 'stepOne', isFormValidated: true, isMonthly: true, monthlyStyle: 'bold', isYearly: false, yearlyStyle: '', annualToggles: true, summaryPlan: 'advanced', onlineDisplay: false, storageDisplay: false, profileDisplay: false, steps: ['stepOne', 'stepTwo', 'stepThree', 'stepFour'], popUp: false, monthlyTotal: 12, yearlyTotal: 90, addonsMonthlyTotal: 0, addonsYearlyTotal: 0, addons: {online: false, storage: false, profile: false}, plans: {arcade: true, advanced: false, pro: false},
        log() {
            console.log($refs.profileCheckbox)
        },
        validation() {
            this.isFormValidated = !this.isFormValidated;
        },
        nextButton() {
            if(this.activeTab === 'stepOne' && !formValidation() && this.isFormValidated);
            else if(this.steps[this.steps.indexOf(this.activeTab) + 1] !== undefined){
                    this.activeTab = this.steps[this.steps.indexOf(this.activeTab) + 1]
                    }
        },
        monthlyToggle() {
            this.annualToggles ? ($refs.firstToggle.checked = true, $refs.secondToggle.checked = true, this.annualToggles = !this.annualToggles) : ($refs.firstToggle.checked = false, $refs.secondToggle.checked = false, this.annualToggles = !this.annualToggles)

            this.annualToggles ? (this.monthlyStyle = 'bold', this.yearlyStyle = '') : (this.monthlyStyle = '', this.yearlyStyle = 'bold');
        },
        salesTotal() {
            this.addonsMonthlyTotal = 0;
            this.addonsYearlyTotal = 0;
            this.onlineDisplay = false;
            this.storageDisplay = false;
            this.profileDisplay = false;
            if($refs.arcadeRadio.checked) {
                this.summaryPlan = 'arcade';
                this.monthlyTotal = 9;
                this.yearlyTotal = 79;
            }
            else if($refs.advancedRadio.checked) {
                this.summaryPlan = 'advanced';
                this.monthlyTotal = 12;
                this.yearlyTotal = 109;
            }
            else if($refs.proRadio.checked) {
                this.summaryPlan = 'pro';
                this.monthlyTotal = 15;
                this.yearlyTotal = 139;
            }
            if($refs.onlineCheckbox.checked){
                this.onlineDisplay = true;
                this.addonsMonthlyTotal += 1;
                this.addonsYearlyTotal += 12;
            }
            if($refs.storageCheckbox.checked){
                this.storageDisplay = true;
                this.addonsMonthlyTotal += 2;
                this.addonsYearlyTotal += 24;
            }
            if($refs.profileCheckbox.checked){
                this.profileDisplay = true;
                this.addonsMonthlyTotal += 2;
                this.addonsYearlyTotal += 24;
            }
        }
        }" x-init="log()" class="container">
            <nav>
                <div class="steps">
                    <div x-bind:class="activeTab === 'stepOne' && 'active'" class="step">
                        <div class="number">
                            <div class="circle">
                                1
                            </div>
                        </div>
                        <div class="text">
                            <h6>Step 1</h6>
                            <p>Your Info</p>
                        </div>
                    </div>
                    <div x-bind:class="activeTab === 'stepTwo' && 'active'" class="step">
                        <div class="number">
                            <div class="circle">
                                2
                            </div>
                        </div>
                        <div class="text">
                            <h6>Step 2</h6>
                            <p>Select Plan</p>
                        </div>
                    </div>
                    <div x-bind:class="activeTab === 'stepThree' && 'active'" class="step">
                        <div class="number">
                            <div class="circle">
                                3
                            </div>
                        </div>
                        <div class="text">
                            <h6>Step 3</h6>
                            <p>Add-Ons</p>
                        </div>
                    </div>
                    <div x-bind:class="activeTab === 'stepFour' && 'active'" class="step">
                        <div class="number">
                            <div class="circle">
                                4
                            </div>
                        </div>
                        <div class="text">
                            <h6>Step 4</h6>
                            <p>Summary</p>
                        </div>
                    </div>
                </div>
            </nav>
            <div class="panels">
                <div x-show="activeTab === 'stepOne'" class="info-panel">
                    <div class="content">
                        <h2>Personal Info</h2>
                        <p>Please provide your name, email address, and phone number.</p>
                        <form action="">
                            <label for="name">Name:</label>
                            <input id="name" type="text" placeholder="Vanessa Mint" required>
                            <label for="email">Email:</label>
                            <input id="email" type="email" placeholder="vanessamint@email.com" required>
                            <label for="phone">Phone Number:</label>
                            <input id="phone" type="phone" placeholder="(604)555-1234" required>
                        </form>
                    </div>
                    <div class="validation-toggle">
                        <h3 x-text="isFormValidated ? 'Form Validation Enabled' : 'Form Validation Disabled'"></h3>
                        <div x-on:change="validation()" class="toggle">
                            <input type="checkbox" checked/>
                            <label></label>
                        </div>
                    </div>
                </div>
                <div x-show="activeTab === 'stepTwo'" class="select-panel">
                    <div class="content">
                        <h2>
                            Select your plan
                        </h2>
                        <p>
                            You have the option of monthly or yearly billing.   
                        </p>
                        <label class="selection">
                            <label class="card">
                                <input x-ref="arcadeRadio" x-on:change="salesTotal()" name="radio" class="radio" type="radio">
                                <div class="card_body">
                                    <div class="icon">
                                        <img src="./assets/images/icon-arcade.svg" alt="Arcade Icon">
                                    </div>
                                    <div class="text">
                                        <h6>Arcade</h6>
                                        <p x-text="annualToggles ? '$9/mo' : '$79/yr'"></p>
                                    </div>
                                </div>
                            </label>
                            <label class="card">
                                <input x-ref="advancedRadio" x-on:change="salesTotal()" name="radio" class="radio" type="radio" checked>
                                <div class="card_body">
                                    <div class="icon">
                                        <img src="./assets/images/icon-advanced.svg" alt="Controler Icon">
                                    </div>
                                    <div class="text">
                                        <h6>Advanced</h6>
                                        <p x-text="annualToggles ? '$12/mo' : '$109/yr'"></p>
                                    </div>
                                </div>
                            </label>
                            <label class="card">
                                <input x-ref="proRadio" x-on:change="salesTotal()" name="radio" class="radio" type="radio">
                                <div class="card_body">
                                    <div class="icon">
                                        <img src="./assets/images/icon-pro.svg" alt="Controler Icon">
                                    </div>
                                    <div class="text">
                                        <h6>Pro</h6>
                                        <p x-text="annualToggles ? '$15/mo' : '$135/yr'"></p>
                                    </div>
                                </div>
                            </label>
                        </label>
                        </div>
                        <div class="annual-toggle">
                            <h5 x-bind:class="monthlyStyle">Monthly</h5>
                            <div class="toggle">
                                <input x-ref="firstToggle" x-on:change="monthlyToggle()" type="checkbox"/>
                                <label></label>
                            </div>
                            <h5 x-bind:class="yearlyStyle">Yearly</h5>
                        </div>
                </div>
                <div x-show="activeTab === 'stepThree'" class="addons-panel">
                    <div class="content">
                        <div class="title">
                            <h2>
                                Pick add-ons
                            </h2>
                            <p>
                                Add-ons help enhance your gaming experience.  
                            </p>
                        </div>
                        <label class="card">
                            <input x-ref="onlineCheckbox" x-on:change="salesTotal()" name="checkbox" class="radio" type="checkbox">
                            <div class="checkbox_card_body">
                                <div class="left">
                                    <div class="checkbox"></div>
                                    <div class="description">
                                        <h2>Online service</h2>
                                        <p>Access to multiplayer games</p>
                                    </div>
                                </div>
                                <div class="price">
                                    <h6>+$1/mo</h6>
                                </div>
                            </div>
                        </label>
                        <label class="card">
                            <input x-ref="storageCheckbox" x-on:change="salesTotal()" name="checkbox" class="radio" type="checkbox">
                            <div class="checkbox_card_body">
                                <div class="left">
                                    <div class="checkbox"></div>
                                    <div class="description">
                                        <h2>Larger storage</h2>
                                        <p>Extra 1TB of cloud save</p>
                                    </div>
                                </div>
                                <div class="price">
                                    <h6>+$2/mo</h6>
                                </div>
                            </div>
                        </label>
                        <label class="card">
                            <input x-ref="profileCheckbox" x-on:change="salesTotal()" name="checkbox" class="radio" type="checkbox">
                            <div class="checkbox_card_body">
                                <div class="left">
                                    <div class="checkbox"></div>
                                    <div class="description">
                                        <h2>Customizable profile</h2>
                                        <p>Custom theme on your profile</p>
                                    </div>
                                </div>
                                <div class="price">
                                    <h6>+$2/mo</h6>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>
                <div x-show="activeTab === 'stepFour'" class="summary-panel">
                    <div class="content">
                        <div class="title">
                            <h2>
                                Finishing up
                            </h2>
                            <p>
                                Double-check everything looks OK before confirming.
                            </p>
                        </div>
                        <div class="summary">
                            <div class="top">
                                <div x-show="summaryPlan == 'arcade'" class="row">
                                    <div class="left">
                                        <h3 x-text="annualToggles ? 'Arcade (Monthly)' : 'Arcade (Yearly)'"></h3>
                                        <div @click="popUp = true" class="change">Change</div>
                                    </div>
                                    <div class="right">
                                        <h4 x-text="annualToggles ? '$9/mo' : '$90/yr'"></h4>
                                    </div>
                                </div>
                                <div x-show="summaryPlan == 'advanced'" class="row">
                                    <div class="left">
                                        <h3>Advanced (Monthly)</h3>
                                        <div @click="popUp = true" class="change">Change</div>
                                    </div>
                                    <div class="right">
                                        <h4 x-text="annualToggles ? '$12/mo' : '$109/yr'"></h4>
                                    </div>
                                </div>
                                <div x-show="summaryPlan == 'pro'" class="row">
                                    <div class="left">
                                        <h3>Pro (Monthly)</h3>
                                        <div @click="popUp = true" class="change">Change</div>
                                    </div>
                                    <div class="right">
                                        <h4 x-text="annualToggles ? '$15/mo' : '$139/yr'"></h4>
                                    </div>
                                </div>
                            </div>
                            <hr />
                            <div class="bottom">
                                <div x-show="onlineDisplay" class="row">
                                    <p>Online service</p>
                                    <h5 x-text="annualToggles ? '+$1/mo' : '+$12/yr'"></h5>
                                </div>
                                <div x-show="storageDisplay" class="row">
                                    <p>Larger Storage</p>
                                    <h5 x-text="annualToggles ? '+$2/mo' : '+$24/yr'"></h5>
                                </div>
                                <div x-show="profileDisplay" class="row">
                                    <p>Customizable Profile</p>
                                    <h5 x-text="annualToggles ? '+$2/mo' : '+$24/yr'"></h5>
                                </div>
                            </div>
                        </div>
                        <div class="total">
                            <div class="row">
                                <p x-text="annualToggles ? 'Total (per month)' : 'Total (per year)' "></p>
                                <h3 x-text="annualToggles ? `$${monthlyTotal + addonsMonthlyTotal}/mo` : `$${yearlyTotal + addonsYearlyTotal}/yr`"></h3>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel-nav">
                    <div
                    @click="
                    if(steps[steps.indexOf(activeTab) - 1] !== undefined){
                    activeTab = steps[steps.indexOf(activeTab) - 1];
                    }
                    "
                    x-show="activeTab !== 'stepOne'"
                    class="previous">
                        Go Back
                    </div>
                    <button
                    @click="
                    nextButton()
                    " 
                    class="next">
                        Next Step
                    </button>
                </div>
                <div x-show="popUp" class="annual-modal">
                    <div @click="popUp = false"  class="close">
                        <div class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"/></svg>
                        </div>
                    </div>
                    <div class="content">
                        <h2>Change Payment Option</h2>
                        <div class="annual-toggle">
                            <h5 x-bind:class="monthlyStyle">Monthly</h5>
                            <div class="toggle">
                                <input x-ref="secondToggle" x-on:change="monthlyToggle()" type="checkbox"/>
                                <label></label>
                            </div>
                            <h5 x-bind:class="yearlyStyle">Yearly</h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script>
        const formValidation = () => {
            const form = document.querySelector('form');
            return form.checkValidity() ? true :
            form.reportValidity();
        }
    </script>
  </body>
</html>
